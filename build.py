import sys
import subprocess

def command(com: str):
    subprocess.run(com.split(" "))

argv = sys.argv
if len(argv) != 2:
    print("you must call this file with task\n" \
    "example: \"python3 build.py new\"\n" \
    "TASKS: new(generate ISO), clean(delete all " \
    "files generated by new)")

    exit(1)
elif argv[1] != "new" and argv[1] != "clean":
    print("TASKS: new(generate ISO), " \
    "clean(delete all files generated by new)")

    exit(1)

command("rustup target add x86_64-unknown-none")
command("rustup component add rust-src")
command(f"cargo build -p kernel --features={argv[1]}")